Issues organized by milestone.

NOTE: Responsibility for the following tickets is partly the consensus team
and partly the ledger team:

* #192
* #199
* #216
* #219
* #261
* #262
* #309

# Storage layer

## Supporting infrastructure

- [X] #193 Consensus_On Disk Representation [DUP]

- [ ] #203 Support for explorer

## FS bindings and simulation

- [X] #208 Bug in removeFile or its tests bug
- [X] #166 Take another look at trying to remove the ExceptT from the HasFS stack

- [ ] #277 Simulate partial writes and reads for the immutable DB
- [ ] #285 Implement Windows-specific parts
- [ ] #292 Support O_EXCL in posix bindings
- [ ] #305 Make sure IO HasFS wrapper includes mount point in error messages
- [ ] #398 Delete remaining unit test

## Immutable DB

- [X] #141 Make immutable DB epoch type configurable
- [X] #205 Implement immutable block storage
- [X] #241 Remove `EpochSlot` and `RelativeSlot` from Immutable DB interface
- [X] #278 Simulate corruptions of on-disk files of the immutable DB
- [X] #291 Test all recovery policies of the immutable DB
- [X] #344 Immutable DB: Support EBBs? [DUP]
- [X] #349 Handle EBBs explicitly in the `ImmutableDB`

- [ ] #328 Close open iterators when the immutable DB is closed or truncated
- [ ] #369 Inclusive/exclusive iterator bounds for the ImmutableDB
- [ ] #379 Immutable DB: Audit memory footprint
- [ ] #384 Let the ImmutableDB return lazy ByteStrings

### Improved testing/minor improvements

- [ ] #290 Simulate random bit flip corruptions for the immutable DB
- [ ] #338 Use `Vector` rather than `Seq` to store culumative epoch sizes in immutable DB

## Volatile DB

- [x] #202 Volatile block storage
- [x] #251 Volatile DB: add labelling
- [x] #252 Volatile DB: Extend q-s-m tests to test reopening
- [x] #253 Volatile DB: Migrate unit tests to q-s-m tests
- [x] #273 Volatile DB: Check against simulated errors

- [ ] #373 Volatile DB: Add fingerprint
- [ ] #378 Volatile DB: Audit memory footprint

## Ledger DB

- [X] #200 Ledger state storage
- [X] #247 Ledger storage: q-s-m tests
- [X] #368 Unify the Tip of the ImmutableDB with the Tip of the LedgerDB

- [ ] #367 Ledger DB: Thread for writing snapshots

## Chain DB / ChainState DB

- [X] #296 ChainState: Move blocks from immutable DB to mutable DB on corruption [WONTFIX]

- [ ] #201 ChainState
- [ ] #226 ChainState: Use ledger to figure out epoch lengths
- [ ] #242 ChainState: Truncate chain when gap arises between immutable DB and volatile DB
- [ ] #246 ChainState: q-s-m tests
- [ ] #264 Sync/Resync
- [ ] #380 Chain DB: Audit memory footprint

## Use storage system in consensus layer

- [ ] #245 Actually use on-disk storage and do proper rollback
- [ ] #266 Write chainSyncServer that uses on-disk storage

# Perm_BFT

- [X] #197 Consensus_OBFT Permissive Impl [DUP]
- [X] #168 Implement permissive BFT [WONTFIX]
- [X] #274 Implement PermBFT in terms of "real" implementation
- [X] #309 Chain selection: prefer higher issue number (DUP)

- [ ] #308 Core/Edge split
- [ ] #422 Implement PBFT chain selection rule

# Integrate ledger

- [X] #255 Carefully think through order of updates

- [ ] #191 Integrate pre-Shelley era ledger.
- [ ] #238 Run protocol tests with "proper" blocks generated by ledger layer generators
- [ ] #250 Run tests with real real blocks

# Header-Body split

- [X] #189 Consensus_Incorporate Network Layer (Header/Body Split) [DUP]

- [ ] #244 Header validation without corresponding bodies
- [ ] #243 Update network abstraction for header/body split

## Stretch goals

- [ ] #423 Rate limiting in the Chain Sync client

# Mempool

- [ ] #265 Implement mempool

# Standalone Node

- [X] #280 Deal correctly with time

- [ ] #223 Fix cleanup of named pipes in demo
- [ ] #267 Ongoing: integrate features implemented elsewhere into standalone node

# Testing

- [X] #132 Fix demo playground
- [X] #195 Consensus_Test Consensus Protocols [DUP]
- [X] #222 Make sure the demo can work when fewer than 3 nodes present
- [ ] #228 Protocol testing: Test with different network topologies
- [ ] #229 Protocol testing: introduce network latencies
- [ ] #230 Protocol testing: test network partitioning
- [ ] #231 Protocol testing: test what happens when nodes join the network much later
- [ ] #232 Protocol testing: test what happens when nodes join and leave the network repeatedly
- [ ] #233 Introduce explicit adversaries
- [ ] #234 Test Praos/genesis with explicit leader schedules
- [ ] #235 Protocol testing: test chain growth
- [ ] #236 Protocol testing: test chain quality
- [ ] #237 Protocol testing: check liveness
- [ ] #269 Protocol testing: recovery from disk failure

# Shelley

## Ledger

- [ ] #258 Integrate post-Shelley era ledger

## Praos

- [X] #131 Praos test failure
- [X] #196 Consensus_Praos Impl
- [X] #206 Update Praos after investigation on representation of fractional numbers [DUP]
- [X] #293 Don't allow for blocks in the future
- [X] #263 Rethink division of work between consensus layer and ledger layer

- [ ] #216 Incorporate decisions regarding floating point in Praos calculations
- [ ] #248 Keep `ChainState` bounded in size
- [ ] #261 Integrate real crypto
- [ ] #262 Support lightweight delegation certificates

## Genesis

- [X] #194 Consensus_Exec Spec Ourborous Genesis [DUP]
- [ ] #199 Make sure that our implementation of genesis is compatible with the paper
- [ ] #219 Work out detailed description of genesis chain selection rule
- [ ] #220 Implement genesis chain selection rule
- [ ] #221 Update chain sync client for genesis chain selection rule

## Transition

- [ ] #192 Implement PermBFT -> Praos transitional protocol
- [ ] #282 Support multiple slot lengths
- [ ] #259 Integrate/test ledger integration across the Shelley hard fork

# Clean up technical debt

- [X] #227 Replace remaining unit tests for the mock file system

- [ ] #322 Take advantage of new async infrastructure
- [ ] #254 Generalize q-s-m framework
- [ ] #224 Reintroduce `QuantifiedConstraints`
- [ ] #225 Replace remaining unit tests for immutable DB
